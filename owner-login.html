<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Owner Login — Wellrs Canteen</title>
  <style>
    :root{--bg:#0f1724;--card:#ffffff;--accent:#ff8800}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Arial;padding:0;margin:0;background:linear-gradient(180deg,#071024 0%,#0f1724 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;color:#fff}
    .card{width:360px;background:#071830;border-radius:12px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.04)}
    h1{font-size:20px;margin-bottom:6px}
    p{color:rgba(255,255,255,.7);margin-bottom:18px;font-size:13px}
    label{display:block;font-size:13px;margin-bottom:6px;color:#dfe6f2}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02);color:#fff;margin-bottom:12px}
    button{width:100%;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
    .muted{font-size:12px;color:rgba(255,255,255,.6);text-align:center;margin-top:12px}
    .error{color:#ffb4b4;background:rgba(255,0,0,.06);padding:8px;border-radius:6px;margin-bottom:8px;font-size:13px}
    .hint{font-size:12px;color:rgba(255,255,255,.6);margin-top:8px}
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">Owner Login — Wellrs Canteen</h1>
    <p>Masuk untuk mengelola pesanan & owner. (Multi-owner support)</p>

    <div id="err" class="error" style="display:none"></div>

    <label for="ownerUsername">Username</label>
    <input id="ownerUsername" autocomplete="username" />

    <label for="ownerPassword">Password</label>
    <input id="ownerPassword" type="password" autocomplete="current-password" />

    <button id="btnLogin" class="loginbtn">Login</button>

    <div class="muted">Hanya untuk pemilik Wellrs Canteen.</div>
    <div class="hint">Note: sistem ini menyimpan data di browser (localStorage) atau Firebase (jika diaktifkan).</div>
  </div>

  <!-- ===== FIREBASE CDN (compat) - MUST LOAD BEFORE owner.js ===== -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <!-- (optional) auth/firestore if you later need them -->
  <!-- <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script> -->
  <!-- <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script> -->

  <script>
    // ====== GANTI KONFIGURASI DENGAN MILIKMU (mime dari firebase.js sebelumnya) ======
    const firebaseConfig = {
      apiKey: "AIzaSyCm2AkoWA-rSTi7j0-A0EARxKBX6n9_1H0",
      authDomain: "wellrs-canteen.firebaseapp.com",
      databaseURL: "https://wellrs-canteen-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "wellrs-canteen",
      storageBucket: "wellrs-canteen.appspot.com",
      messagingSenderId: "414987689956",
      appId: "1:414987689956:web:3063be71602cda0d1cf1f1"
    };

    // init firebase
    try {
      firebase.initializeApp(firebaseConfig);
      // expose rtdb helper for owner.js (owner.js will check window.rtdb)
      window.rtdb = firebase.database();
      console.info("Firebase initialized (compat).");
    } catch (e) {
      console.warn("Firebase init failed:", e);
    }
  </script>

  <!-- include owner.js (harus setelah Firebase init) -->
  <script src="js/owner.js"></script>

  <script>
    // pastikan super owner ada di localStorage fallback (jika Firebase tidak terpakai)
    (function(){
      try {
        const ownersRaw = localStorage.getItem('owners');
        if(!ownersRaw){
          const initial = [{ username: 'stockwise', password: 'ferrari' }];
          localStorage.setItem('owners', JSON.stringify(initial));
        }
      } catch(e) { console.warn(e); }
    })();

    // login handler — memanggil ownerLogin()
    document.getElementById('btnLogin').addEventListener('click', () => {
      const errEl = document.getElementById('err');
      errEl.style.display = 'none';

      const u = document.getElementById('ownerUsername').value.trim();
      const p = document.getElementById('ownerPassword').value.trim();

      if(!u || !p){
        errEl.textContent = 'Masukkan username & password.';
        errEl.style.display = 'block';
        return;
      }

      // ownerLogin() berasal dari js/owner.js (dijalankan setelah Firebase)
      ownerLogin();
    });

    // enter untuk login
    ['ownerUsername','ownerPassword'].forEach(id=>{
      document.getElementById(id).addEventListener('keypress',(e)=>{
        if(e.key === 'Enter') document.getElementById('btnLogin').click();
      });
    });

  </script>
</body>
</html>